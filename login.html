<!DOCTYPE html>
<html dir="ltr" lang="fr">
	<head>
		<meta charset="utf-8" />
	</head>

	<body>
		<form method="post" id="login_form">
			<input type="text" name="username"
			placeholder="Nom dâ€™utilisateur" autocomplete="username">

			<input type="password" name="password"
			placeholder="Mot de passe" autocomplete="password">

			<input type="hidden" name="autologin" value="checked">
			<input type="hidden" name="creation_time">
			<input type="hidden" name="form_token">

			<input type="submit" name="login">
		</form>

		<script>
			const request = new XMLHttpRequest();

			window.onload = () => {
				request.open("GET", "api/user?format=json", true);
				request.onload = () => {
					const user_data = JSON.parse(request.responseText);

					document.getElementById("login_form").action = user_data.action;
					document.getElementsByName("creation_time")[0].value = user_data.creation_time;
					document.getElementsByName("form_token")[0].value = user_data.login_form_token;
				}
				request.send();
			};
		</script>
	</body>
</html>